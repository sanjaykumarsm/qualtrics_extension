[@qualtrics/actions-task-client](../globals.md) › ["src/actionsTaskClient"](../modules/_src_actionstaskclient_.md) › [ActionsTaskClient](_src_actionstaskclient_.actionstaskclient.md)

# Class: ActionsTaskClient

## Hierarchy

* **ActionsTaskClient**

## Index

### Constructors

* [constructor](_src_actionstaskclient_.actionstaskclient.md#private-constructor)

### Properties

* [context](_src_actionstaskclient_.actionstaskclient.md#context)
* [events](_src_actionstaskclient_.actionstaskclient.md#private-events)
* [pluginClientInstance](_src_actionstaskclient_.actionstaskclient.md#private-pluginclientinstance)
* [translator](_src_actionstaskclient_.actionstaskclient.md#translator)

### Methods

* [customOnSave](_src_actionstaskclient_.actionstaskclient.md#customonsave)
* [disableSaveButton](_src_actionstaskclient_.actionstaskclient.md#disablesavebutton)
* [enableSaveButton](_src_actionstaskclient_.actionstaskclient.md#enablesavebutton)
* [fetch](_src_actionstaskclient_.actionstaskclient.md#fetch)
* [getAvailableConnections](_src_actionstaskclient_.actionstaskclient.md#getavailableconnections)
* [getConfig](_src_actionstaskclient_.actionstaskclient.md#getconfig)
* [getLanguage](_src_actionstaskclient_.actionstaskclient.md#getlanguage)
* [getPipedText](_src_actionstaskclient_.actionstaskclient.md#getpipedtext)
* [getText](_src_actionstaskclient_.actionstaskclient.md#gettext)
* [isNewTask](_src_actionstaskclient_.actionstaskclient.md#isnewtask)
* [isSavedTask](_src_actionstaskclient_.actionstaskclient.md#issavedtask)
* [onSave](_src_actionstaskclient_.actionstaskclient.md#onsave)
* [qualtricsApiFetch](_src_actionstaskclient_.actionstaskclient.md#qualtricsapifetch)
* [initialize](_src_actionstaskclient_.actionstaskclient.md#static-initialize)

## Constructors

### `Private` constructor

\+ **new ActionsTaskClient**(`pluginClientInstance`: PluginClient, `events`: [ActionTaskEvents](../modules/_src_models_models_.md#actiontaskevents)): *[ActionsTaskClient](_src_actionstaskclient_.actionstaskclient.md)*

Defined in src/actionsTaskClient.ts:26

**Parameters:**

Name | Type |
------ | ------ |
`pluginClientInstance` | PluginClient |
`events` | [ActionTaskEvents](../modules/_src_models_models_.md#actiontaskevents) |

**Returns:** *[ActionsTaskClient](_src_actionstaskclient_.actionstaskclient.md)*

## Properties

###  context

• **context**: *[Context](../modules/_src_models_models_.md#context)*

Defined in src/actionsTaskClient.ts:25

___

### `Private` events

• **events**: *[ActionTaskEvents](../modules/_src_models_models_.md#actiontaskevents)*

Defined in src/actionsTaskClient.ts:30

___

### `Private` pluginClientInstance

• **pluginClientInstance**: *PluginClient*

Defined in src/actionsTaskClient.ts:29

___

###  translator

• **translator**: *Translator | undefined*

Defined in src/actionsTaskClient.ts:26

## Methods

###  customOnSave

▸ **customOnSave**(`saveHandler`: function): *void*

Defined in src/actionsTaskClient.ts:204

Used when wanting to make the task trigger a custom worker.

The handler should return a config with a custom triggerAction
```
{
  triggerAction {string}: custom worker name
  ...
  any other fields to pass to the custom worker
}
```

**Parameters:**

▪ **saveHandler**: *function*

▸ (...`args`: unknown[]): *unknown*

**Parameters:**

Name | Type |
------ | ------ |
`...args` | unknown[] |

**Returns:** *void*

___

###  disableSaveButton

▸ **disableSaveButton**(): *void*

Defined in src/actionsTaskClient.ts:93

Disables the save button so the task cannot be saved

**Returns:** *void*

___

###  enableSaveButton

▸ **enableSaveButton**(): *void*

Defined in src/actionsTaskClient.ts:86

Enables the save button so the task can be saved

**Returns:** *void*

___

###  fetch

▸ **fetch**(`url`: string, `fetchConfig`: UserProvidedFetchConfig, `timeout`: number): *Promise‹FetchResponse›*

Defined in src/actionsTaskClient.ts:288

Sends a request to the provided URL. Injects user defined account for authentication
if specified in connection property.

fetchConfig should be formatted as follows:
```
{
  method {string}: the http method to use (ex: 'POST', 'GET, 'PUT', etc.)
  headers {object} (optional): key/value pairs that correspond to headers to add to the request (ex: "Content-Type": "application/json")
  body {object | string} (optional): the body of the request
  params {object} (optional): key/value pairs that correspond query params to add to the request URL (ex: "filter": "random")
  connection {object} (optional): {
    connectionName {string}: the name of the connection to use (see context.availableConnections for a list of connections).
    paramFormat {string}: where to place the credential. Can be 'header','body', or 'query'.
    paramName {string}: what to name the credential param. As in, the field name for a body param, the query name for a query param, or the header name for a header. Ex: for a bearer token this might be "Authorization".
    paramTemplate {string}: what to insert the credential as. Use it similarly to a string passed to String.format. EX: "Bearer %s" would be a template for bearer tokens, "%s" inserts the token as-is.
  }
}
```

**Parameters:**

Name | Type | Default | Description |
------ | ------ | ------ | ------ |
`url` | string | - | The URL to make a request to |
`fetchConfig` | UserProvidedFetchConfig | - | Configures all aspects of the request |
`timeout` | number | LONG_TIMEOUT | Defaults to 10000 (10 seconds). Specifies the number of milliseconds at which to reject the returned promise if no response has been received from the Plugin. |

**Returns:** *Promise‹FetchResponse›*

resolves to an object containing {responseBody: JSON string, httpStatusCode: string}

___

###  getAvailableConnections

▸ **getAvailableConnections**(): *any*

Defined in src/actionsTaskClient.ts:118

Used to get an object of possible connections

**Returns:** *any*

returns an object of available connections and their ID's

___

###  getConfig

▸ **getConfig**(): *unknown*

Defined in src/actionsTaskClient.ts:136

Used to get the previously saved config.

**Returns:** *unknown*

Returns the previously saved config, or an empty object if it is a new task

___

###  getLanguage

▸ **getLanguage**(): *string*

Defined in src/actionsTaskClient.ts:237

Returns the language code of the logged in user given by the host on init.

**Returns:** *string*

the language code of the logged user given by the host on init.

___

###  getPipedText

▸ **getPipedText**(): *any*

Defined in src/actionsTaskClient.ts:127

Used to retrieve the piped text to be used in components from the `@qualtrics/plugin-ui-react` library

**Returns:** *any*

Returns piped text array

___

###  getText

▸ **getText**(`key`: string, `placeHolders?`: Record‹string, string›, `defaultVal?`: undefined | string): *string*

Defined in src/actionsTaskClient.ts:229

Retrieves localized strings from the Plugin's translation files, specifically
from the translation that matches the User's language. Valid keys are defined by top-level
properties of the `strings` object in the translation file.

**Parameters:**

Name | Type |
------ | ------ |
`key` | string |
`placeHolders?` | Record‹string, string› |
`defaultVal?` | undefined &#124; string |

**Returns:** *string*

the translation associated with the key

___

###  isNewTask

▸ **isNewTask**(): *boolean*

Defined in src/actionsTaskClient.ts:101

Used to determine if the user is configuring a new task

**Returns:** *boolean*

Returns true if the task is new. Returns false if it is a saved task.

___

###  isSavedTask

▸ **isSavedTask**(): *boolean*

Defined in src/actionsTaskClient.ts:109

Used to determine if the user is edditing a saved task

**Returns:** *boolean*

Returns false if the task is new. Returns true if it is a saved task.

___

###  onSave

▸ **onSave**(`saveHandler`: function): *void*

Defined in src/actionsTaskClient.ts:158

The save handler will be called when the save button is pressed. It should return a
config that is formatted as follows:
```
{
  url {string}: the url of the http request
  method {string}: POST or PUT
  headers {object}: the header of the http request
  body {object}: The body of the http request
  connection {object}: {
    id {string}: the name of the connection to use (see getAvailableConnections() for a list of ID's).
    paramFormat {string}: where to place the credential. Can be 'header','body', or 'query'.
    paramName {string}: what to name the credential param. As in, the field name for a body param, the query name for a query param, or the header name for a header. Ex: for a bearer token this might be "Authorization".
    paramTemplate {string}: what to insert the credential as. Use it similarly to a string passed to String.format. EX: "Bearer %s" would be a template for bearer tokens, "%s" inserts the token as-is.
}
```

**Parameters:**

▪ **saveHandler**: *function*

▸ (...`args`: unknown[]): *unknown*

**Parameters:**

Name | Type |
------ | ------ |
`...args` | unknown[] |

**Returns:** *void*

___

###  qualtricsApiFetch

▸ **qualtricsApiFetch**(`url`: string, `config`: UserProvidedQualtricsApiFetchConfig, `timeout`: number): *Promise‹FetchResponse›*

Defined in src/actionsTaskClient.ts:256

Make a request to Qualtrics Public API. Similar to fetch, but doesn't accept a connection.

The config should be formatted as follows:
```
{
  method {string}: the http method to use (ex: 'POST', 'GET, 'PUT', etc.)
  body {object | string} (optional): the body of the request
}
```

**Parameters:**

Name | Type | Default | Description |
------ | ------ | ------ | ------ |
`url` | string | - | The relative Qualtrics API path to make a request to, such as `surveys` |
`config` | UserProvidedQualtricsApiFetchConfig | - | Configures all aspects of the request |
`timeout` | number | LONG_TIMEOUT | Defaults to 10000 (10 seconds). Specifies the number of milliseconds at which to reject the returned promise if no response has been received from the Plugin. |

**Returns:** *Promise‹FetchResponse›*

- response from the API

___

### `Static` initialize

▸ **initialize**(): *Promise‹[ActionsTaskClient](_src_actionstaskclient_.actionstaskclient.md)›*

Defined in src/actionsTaskClient.ts:71

*Optional parameter:*

* `config` object - may contain a `pages` key which contains the number of pages for a multi-page Plugin. Example:

  ```javascript
  config = {
    pages: 3
  }
  ```

  Plugins initialized without a `config` parameter will default to one page.

**Returns:** *Promise‹[ActionsTaskClient](_src_actionstaskclient_.actionstaskclient.md)›*
